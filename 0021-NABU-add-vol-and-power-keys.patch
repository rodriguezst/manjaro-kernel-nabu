From f2cbdb50ea9d015118c0acd76af9981cb2d2b346 Mon Sep 17 00:00:00 2001
From: maverick <maverick_jia@sina.com>
Date: Tue, 7 Nov 2023 12:53:51 +0800
Subject: [PATCH 21/45] NABU: add vol and power keys

---
 .../dts/qcom/sm8150-xiaomi-nabu-maverick.dts  | 20 +++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/qcom/sm8150-xiaomi-nabu-maverick.dts b/arch/arm64/boot/dts/qcom/sm8150-xiaomi-nabu-maverick.dts
index 7ac34eb98..77bb0a8b9 100644
--- a/arch/arm64/boot/dts/qcom/sm8150-xiaomi-nabu-maverick.dts
+++ b/arch/arm64/boot/dts/qcom/sm8150-xiaomi-nabu-maverick.dts
@@ -188,6 +188,22 @@ lcd_avee_5p5: lcd-avee-regulator {
 		regulator-boot-on;
 	};
 
+	gpio_keys: gpio-keys {
+		compatible = "gpio-keys";
+
+		pinctrl-names = "default";
+		pinctrl-0 = <&vol_up_n>;
+
+		key-vol-up {
+			label = "Volume Up";
+			gpios = <&pm8150_gpios 6 GPIO_ACTIVE_LOW>;
+			linux,code = <KEY_VOLUMEUP>;
+			debounce-interval = <15>;
+			linux,can-disable;
+			wakeup-source;
+		};
+	};
+
 	bat: battery {
 		compatible = "simple-battery";
 		constant-charge-current-max-microamp = <900000>;
@@ -198,12 +214,12 @@ bat: battery {
 };
 
 &pm8150_gpios {
-	key_vol_up_default: key_vol_up_default {
+	vol_up_n: vol-up-n-state {
 		pins = "gpio6";
 		function = "normal";
+		power-source = <1>;
 		input-enable;
 		bias-pull-up;
-		power-source = <1>;
 	};
 };
 
-- 
2.34.1

